1. https://kubernetes.io/docs/setup/
2. https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/
3. https://kubernetes.io/docs/concepts/overview/components/
```
service kubelet status
which kubeadm
which kubectl
ls /etc/kubernetes/manifests/
```
```
sudo kubeadm reset --force
sudo kubeadm init --pod-network-cidr 192.168.0.0/16 --ignore-preflight-errors all
ls /etc/kubernetes/manifests/
ls -l /etc/kubernetes/admin.conf
```
```
mkdir -p ${HOME}/.kube
sudo cp /etc/kubernetes/admin.conf ${HOME}/.kube/config
sudo chown -R $( id -u ):$( id -g ) ${HOME}/.kube/
echo 'source <(kubectl completion bash)' | tee --append ${HOME}/.bashrc
source ${HOME}/.bashrc
```
```
kubectl apply --filename https://docs.projectcalico.org/v3.21/manifests/calico.yaml
watch kubectl get no
```
```
sudo kubeadm token create --print-join-command
```
```
watch kubectl get no
kubectl run test --image docker.io/library/nginx:alpine
kubectl get po --output wide
kubectl describe po
kubectl get po --output yaml
kubectl logs test
kubectl get po/test --output yaml | tee po.yaml
```
```
kubectl explain po
kubectl explain po.spec
kubectl explain po.spec.containers
kubectl explain po.spec.containers.resources
kubectl explain po.spec.containers.workingDir
kubectl explain po.spec.containers.securityContext
kubectl explain po.spec.containers.env
kubectl explain po.spec.containers.volumeMounts
kubectl explain po.spec.volumes.secret
kubectl explain svc.spec.ports
kubectl explain svc.spec.selector
kubectl explain rs.spec
kubectl explain rs.spec.template
```
```
tee php/kube-compose.yaml 0<<EOF
apiVersion: v1
kind: ReplicationController
metadata:
  name: phpinfo-rc
spec:
  replicas: 2
  selector:
    app: phpinfo
  template:
    metadata:
      labels:
        app: phpinfo
    spec:
      containers:
      - args:
        - -f
        - index.php
        - -S
        - 0.0.0.0:8080
        command:
        - /usr/local/bin/php
        env:
        - name: OWNER
          value: Sebastian
        image: docker.io/library/php:alpine@sha256:6340f86b1dc4325d09cd8311d8c40e36ab54061d0d25ea1491c100578bc50ae1
        name: phpinfo-container
        resources:
          limits:
            cpu: 200m
            memory: 200M
          requests:
            cpu: 200m
            memory: 200M
        securityContext:
          readOnlyRootFilesystem: true
          runAsGroup: 65534
          runAsUser: 65534
        volumeMounts:
        - mountPath: /my_app/data/
          name: my-volume
          readOnly: false
        - mountPath: /my_app/index.php
          name: php-config
          readOnly: true
          subPath: index.php
        - mountPath: /my_app/index-secret.php
          name: php-secret
          readOnly: true
          subPath: index-secret.php
        workingDir: /my_app/
      volumes:
      - name: my-volume
      - name: php-config
        configMap:
          defaultMode: 0400
          items:
          - key: index.php
            mode: 0400
            path: index.php
          name: php-config
      - name: php-secret
        secret:
          defaultMode: 0400
          items:
          - key: index.php
            mode: 0400
            path: index.php
          secretName: php-secret
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: php-config
data:
  index.php: <?php phpinfo();?>
---
apiVersion: v1
kind: Secret
metadata:
  name: php-secret
stringData:
  index.php: <?php phpinfo();?>
---
apiVersion: v1
kind: Service
metadata:
  name: phpinfo-svc
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 8080
  selector:
    app: phpinfo
  type: NodePort
EOF
```
```
kubectl apply --filename php/kube-compose.yaml
watch kubectl get all
```
