```
sudo docker images
sudo docker history localhost/library/alpine:php
sudo docker inspect localhost/library/alpine:php
```
```
mkdir Builder -p
tee ./Builder/Dockerfile-flat 0<<EOF
FROM docker.io/library/alpine:latest
RUN apk add php
FROM scratch
COPY --from=0 / /
EOF
sudo docker build --file ./Builder/Dockerfile-flat --tag localhost/library/alpine:php-flat ./Builder/
sudo docker history localhost/library/alpine:php-flat
sudo docker inspect localhost/library/alpine:php-flat
```
```
sudo docker pull docker.io/library/php:alpine
sudo docker inspect docker.io/library/php:alpine
mkdir ./Flatten
tee ./Flatten/Dockerfile-php 0<<EOF
FROM docker.io/library/php:alpine
FROM scratch
COPY --from=0 / /
EOF
sudo docker build --file ./Flatten/Dockerfile-php --tag localhost/library/php:alpine-flat ./Flatten
sudo docker inspect localhost/library/php:alpine-flat
```
```
sudo ls /var/lib/docker/overlay2/
sudo docker inspect docker.io/library/php:alpine | grep Env -m1 -A12
sudo docker inspect localhost/library/php:alpine-flat | grep Env -m1 -A2
sudo docker run --entrypoint php --name php_alpine --rm docker.io/library/php:alpine --version
sudo docker run --entrypoint printenv --name php_alpine --rm docker.io/library/php:alpine
sudo docker run --entrypoint php --name php_alpine-flat --rm localhost/library/php:alpine-flat --version
sudo docker run --entrypoint printenv --name php_alpine-flat --rm localhost/library/php:alpine-flat
sudo docker run --entrypoint printenv --env PHP_VERSION=8.1.5 --name php_alpine-flat --rm localhost/library/php:alpine-flat
```
